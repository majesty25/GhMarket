"use strict";(()=>{var P="0.2.1";var A={HIGHLIGHT_COLOR:"#0079F2",HIGHLIGHT_BG:"#0079F210",ALLOWED_DOMAIN:".replit.dev"},Q=`
  [contenteditable] {
    outline: none !important;
    box-shadow: none !important;
    border: none !important;
  }
  
  [contenteditable]:focus {
    outline: none !important;
    box-shadow: none !important;
    border: none !important;
  }
  
  .beacon-highlighter {
    content: '';
    position: absolute;
    z-index: ${Number.MAX_SAFE_INTEGER-3};
    box-sizing: border-box;
    pointer-events: none;
    outline: 2px dashed ${A.HIGHLIGHT_COLOR} !important;
    outline-offset: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    transform: none !important;
    background: ${A.HIGHLIGHT_BG} !important;
    opacity: 0;
  }
  
  .beacon-hover-highlighter {
    position: fixed;
    z-index: ${Number.MAX_SAFE_INTEGER};
  }
  
  .beacon-selected-highlighter {
    position: fixed;
    pointer-events: none;
    outline: 2px solid ${A.HIGHLIGHT_COLOR} !important;
    outline-offset: 3px !important;
    background: none !important;
  }
  
  .beacon-label {
    position: absolute;
    background-color: ${A.HIGHLIGHT_COLOR};
    color: #FFFFFF;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 14px;
    font-family: monospace;
    line-height: 1;
    white-space: nowrap;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transform: translateY(-100%);
    margin-top: -4px;
    left: 0;
    z-index: ${Number.MAX_SAFE_INTEGER-2};
    pointer-events: none;
    opacity: 0;
  }
  
  .beacon-hover-label {
    position: fixed;
    z-index: ${Number.MAX_SAFE_INTEGER};
  }
  
  .beacon-selected-label {
    position: fixed;
    pointer-events: none;
  }
  
  .beacon-sibling-highlighter {
    position: fixed;
    pointer-events: none;
    outline: 2px dashed ${A.HIGHLIGHT_COLOR} !important;
    outline-offset: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    transform: none !important;
    background: ${A.HIGHLIGHT_BG} !important;
  }
`;function Le(e,i){return e[13]=1,e[14]=i>>8,e[15]=i&255,e[16]=i>>8,e[17]=i&255,e}var se=112,oe=72,ae=89,le=115,W;function Ne(){let e=new Int32Array(256);for(let i=0;i<256;i++){let t=i;for(let n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[i]=t}return e}function Me(e){let i=-1;W||(W=Ne());for(let t=0;t<e.length;t++)i=W[(i^e[t])&255]^i>>>8;return i^-1}function De(e){let i=e.length-1;for(let t=i;t>=4;t--)if(e[t-4]===9&&e[t-3]===se&&e[t-2]===oe&&e[t-1]===ae&&e[t]===le)return t-3;return 0}function Ie(e,i,t=!1){let n=new Uint8Array(13);i*=39.3701,n[0]=se,n[1]=oe,n[2]=ae,n[3]=le,n[4]=i>>>24,n[5]=i>>>16,n[6]=i>>>8,n[7]=i&255,n[8]=n[4],n[9]=n[5],n[10]=n[6],n[11]=n[7],n[12]=1;let o=Me(n),r=new Uint8Array(4);if(r[0]=o>>>24,r[1]=o>>>16,r[2]=o>>>8,r[3]=o&255,t){let a=De(e);return e.set(n,a),e.set(r,a+13),e}else{let a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;let s=new Uint8Array(54);return s.set(e,0),s.set(a,33),s.set(n,37),s.set(r,50),s}}var ce="[modern-screenshot]",C=typeof window<"u",Re=C&&"Worker"in window,_e=C&&"atob"in window,jt=C&&"btoa"in window,j=C?window.navigator?.userAgent:"",he=j.includes("Chrome"),F=j.includes("AppleWebKit")&&!he,V=j.includes("Firefox"),Oe=e=>e&&"__CONTEXT__"in e,Pe=e=>e.constructor.name==="CSSFontFaceRule",Fe=e=>e.constructor.name==="CSSImportRule",v=e=>e.nodeType===1,I=e=>typeof e.className=="object",ge=e=>e.tagName==="image",ke=e=>e.tagName==="use",N=e=>v(e)&&typeof e.style<"u"&&!I(e),$e=e=>e.nodeType===8,Ue=e=>e.nodeType===3,x=e=>e.tagName==="IMG",k=e=>e.tagName==="VIDEO",Be=e=>e.tagName==="CANVAS",We=e=>e.tagName==="TEXTAREA",Ge=e=>e.tagName==="INPUT",je=e=>e.tagName==="STYLE",Ve=e=>e.tagName==="SCRIPT",ze=e=>e.tagName==="SELECT",qe=e=>e.tagName==="SLOT",Xe=e=>e.tagName==="IFRAME",Ye=(...e)=>console.warn(ce,...e);function Je(e){let i=e?.createElement?.("canvas");return i&&(i.height=i.width=1),!!i&&"toDataURL"in i&&!!i.toDataURL("image/webp").includes("image/webp")}var G=e=>e.startsWith("data:");function de(e,i){if(e.match(/^[a-z]+:\/\//i))return e;if(C&&e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i)||!C)return e;let t=$().implementation.createHTMLDocument(),n=t.createElement("base"),o=t.createElement("a");return t.head.appendChild(n),t.body.appendChild(o),i&&(n.href=i),o.href=e,o.href}function $(e){return(e&&v(e)?e?.ownerDocument:e)??window.document}var U="http://www.w3.org/2000/svg";function Ke(e,i,t){let n=$(t).createElementNS(U,"svg");return n.setAttributeNS(null,"width",e.toString()),n.setAttributeNS(null,"height",i.toString()),n.setAttributeNS(null,"viewBox",`0 0 ${e} ${i}`),n}function Qe(e,i){let t=new XMLSerializer().serializeToString(e);return i&&(t=t.replace(/[\u0000-\u0008\v\f\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,"")),`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t)}`}async function Ze(e,i="image/png",t=1){try{return await new Promise((n,o)=>{e.toBlob(r=>{r?n(r):o(new Error("Blob is null"))},i,t)})}catch(n){if(_e)return et(e.toDataURL(i,t));throw n}}function et(e){let[i,t]=e.split(","),n=i.match(/data:(.+);/)?.[1]??void 0,o=window.atob(t),r=o.length,a=new Uint8Array(r);for(let s=0;s<r;s+=1)a[s]=o.charCodeAt(s);return new Blob([a],{type:n})}function ue(e,i){return new Promise((t,n)=>{let o=new FileReader;o.onload=()=>t(o.result),o.onerror=()=>n(o.error),o.onabort=()=>n(new Error(`Failed read blob to ${i}`)),i==="dataUrl"?o.readAsDataURL(e):i==="arrayBuffer"&&o.readAsArrayBuffer(e)})}var tt=e=>ue(e,"dataUrl"),it=e=>ue(e,"arrayBuffer");function H(e,i){let t=$(i).createElement("img");return t.decoding="sync",t.loading="eager",t.src=e,t}function M(e,i){return new Promise(t=>{let{timeout:n,ownerDocument:o,onError:r,onWarn:a}=i??{},s=typeof e=="string"?H(e,$(o)):e,c=null,h=null;function l(){t(s),c&&clearTimeout(c),h?.()}if(n&&(c=setTimeout(l,n)),k(s)){let g=s.currentSrc||s.src;if(!g)return s.poster?M(s.poster,i).then(t):l();if(s.readyState>=2)return l();let d=l,m=u=>{a?.("Failed video load",g,u),r?.(u),l()};h=()=>{s.removeEventListener("loadeddata",d),s.removeEventListener("error",m)},s.addEventListener("loadeddata",d,{once:!0}),s.addEventListener("error",m,{once:!0})}else{let g=ge(s)?s.href.baseVal:s.currentSrc||s.src;if(!g)return l();let d=async()=>{if(x(s)&&"decode"in s)try{await s.decode()}catch(u){a?.("Failed to decode image, trying to render anyway",s.dataset.originalSrc||g,u)}l()},m=u=>{a?.("Failed image load",s.dataset.originalSrc||g,u),l()};if(x(s)&&s.complete)return d();h=()=>{s.removeEventListener("load",d),s.removeEventListener("error",m)},s.addEventListener("load",d,{once:!0}),s.addEventListener("error",m,{once:!0})}})}async function nt(e,i){N(e)&&(x(e)||k(e)?await M(e,i):await Promise.all(["img","video"].flatMap(t=>Array.from(e.querySelectorAll(t)).map(n=>M(n,i)))))}var me=function(){let i=0,t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(i+=1,`u${t()}${i}`)}();function fe(e){return e?.split(",").map(i=>i.trim().replace(/"|'/g,"").toLowerCase()).filter(Boolean)}var Z=0;function rt(e){let i=`${ce}[#${Z}]`;return Z++,{time:t=>e&&console.time(`${i} ${t}`),timeEnd:t=>e&&console.timeEnd(`${i} ${t}`),warn:(...t)=>e&&Ye(...t)}}function st(e){return{cache:e?"no-cache":"force-cache"}}async function z(e,i){return Oe(e)?e:ot(e,{...i,autoDestruct:!0})}async function ot(e,i){let{scale:t=1,workerUrl:n,workerNumber:o=1}=i||{},r=!!i?.debug,a=i?.features??!0,s=e.ownerDocument??(C?window.document:void 0),c=e.ownerDocument?.defaultView??(C?window:void 0),h=new Map,l={width:0,height:0,quality:1,type:"image/png",scale:t,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:r,fetch:{requestInit:st(i?.fetch?.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1,...i?.fetch},fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber:o,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1,...i,__CONTEXT__:!0,log:rt(r),node:e,ownerDocument:s,ownerWindow:c,dpi:t===1?null:96*t,svgStyleElement:pe(s),svgDefsElement:s?.createElementNS(U,"defs"),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...Array.from({length:Re&&n&&o?o:0})].map(()=>{try{let m=new Worker(n);return m.onmessage=async u=>{let{url:f,result:p}=u.data;p?h.get(f)?.resolve?.(p):h.get(f)?.reject?.(new Error(`Error receiving message from worker: ${f}`))},m.onmessageerror=u=>{let{url:f}=u.data;h.get(f)?.reject?.(new Error(`Error receiving message from worker: ${f}`))},m}catch(m){return l.log.warn("Failed to new Worker",m),null}}).filter(Boolean),fontFamilies:new Map,fontCssTexts:new Map,acceptOfImage:`${[Je(s)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")};q=0.8`,requests:h,drawImageCount:0,tasks:[],features:a,isEnable:m=>m==="restoreScrollPosition"?typeof a=="boolean"?!1:a[m]??!1:typeof a=="boolean"?a:a[m]??!0};l.log.time("wait until load"),await nt(e,{timeout:l.timeout,onWarn:l.log.warn}),l.log.timeEnd("wait until load");let{width:g,height:d}=at(e,l);return l.width=g,l.height=d,l}function pe(e){if(!e)return;let i=e.createElement("style"),t=i.ownerDocument.createTextNode(`
.______background-clip--text {
  background-clip: text;
  -webkit-background-clip: text;
}
`);return i.appendChild(t),i}function at(e,i){let{width:t,height:n}=i;if(v(e)&&(!t||!n)){let o=e.getBoundingClientRect();t=t||o.width||Number(e.getAttribute("width"))||0,n=n||o.height||Number(e.getAttribute("height"))||0}return{width:t,height:n}}async function lt(e,i){let{log:t,timeout:n,drawImageCount:o,drawImageInterval:r}=i;t.time("image to canvas");let a=await M(e,{timeout:n,onWarn:i.log.warn}),{canvas:s,context2d:c}=ct(e.ownerDocument,i),h=()=>{try{c?.drawImage(a,0,0,s.width,s.height)}catch(l){i.log.warn("Failed to drawImage",l)}};if(h(),i.isEnable("fixSvgXmlDecode"))for(let l=0;l<o;l++)await new Promise(g=>{setTimeout(()=>{h(),g()},l+r)});return i.drawImageCount=0,t.timeEnd("image to canvas"),s}function ct(e,i){let{width:t,height:n,scale:o,backgroundColor:r,maximumCanvasSize:a}=i,s=e.createElement("canvas");s.width=Math.floor(t*o),s.height=Math.floor(n*o),s.style.width=`${t}px`,s.style.height=`${n}px`,a&&(s.width>a||s.height>a)&&(s.width>a&&s.height>a?s.width>s.height?(s.height*=a/s.width,s.width=a):(s.width*=a/s.height,s.height=a):s.width>a?(s.height*=a/s.width,s.width=a):(s.width*=a/s.height,s.height=a));let c=s.getContext("2d");return c&&r&&(c.fillStyle=r,c.fillRect(0,0,s.width,s.height)),{canvas:s,context2d:c}}function be(e,i){if(e.ownerDocument)try{let r=e.toDataURL();if(r!=="data:,")return H(r,e.ownerDocument)}catch(r){i.log.warn("Failed to clone canvas",r)}let t=e.cloneNode(!1),n=e.getContext("2d"),o=t.getContext("2d");try{return n&&o&&o.putImageData(n.getImageData(0,0,e.width,e.height),0,0),t}catch(r){i.log.warn("Failed to clone canvas",r)}return t}function ht(e,i){try{if(e?.contentDocument?.body)return q(e.contentDocument.body,i)}catch(t){i.log.warn("Failed to clone iframe",t)}return e.cloneNode(!1)}function gt(e){let i=e.cloneNode(!1);return e.currentSrc&&e.currentSrc!==e.src&&(i.src=e.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager"),i}async function dt(e,i){if(e.ownerDocument&&!e.currentSrc&&e.poster)return H(e.poster,e.ownerDocument);let t=e.cloneNode(!1);t.crossOrigin="anonymous",e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc);let n=t.ownerDocument;if(n){let o=!0;if(await M(t,{onError:()=>o=!1,onWarn:i.log.warn}),!o)return e.poster?H(e.poster,e.ownerDocument):t;t.currentTime=e.currentTime,await new Promise(a=>{t.addEventListener("seeked",a,{once:!0})});let r=n.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;try{let a=r.getContext("2d");a&&a.drawImage(t,0,0,r.width,r.height)}catch(a){return i.log.warn("Failed to clone video",a),e.poster?H(e.poster,e.ownerDocument):t}return be(r,i)}return t}function ut(e,i){return Be(e)?be(e,i):Xe(e)?ht(e,i):x(e)?gt(e):k(e)?dt(e,i):e.cloneNode(!1)}function mt(e){let i=e.sandbox;if(!i){let{ownerDocument:t}=e;try{t&&(i=t.createElement("iframe"),i.id=`__SANDBOX__-${me()}`,i.width="0",i.height="0",i.style.visibility="hidden",i.style.position="fixed",t.body.appendChild(i),i.contentWindow?.document.write('<!DOCTYPE html><meta charset="UTF-8"><title></title><body>'),e.sandbox=i)}catch(n){e.log.warn("Failed to getSandBox",n)}}return i}var ft=["width","height","-webkit-text-fill-color"],pt=["stroke","fill"];function Ee(e,i,t){let{defaultComputedStyles:n}=t,o=e.nodeName.toLowerCase(),r=I(e)&&o!=="svg",a=r?pt.map(f=>[f,e.getAttribute(f)]).filter(([,f])=>f!==null):[],s=[r&&"svg",o,a.map((f,p)=>`${f}=${p}`).join(","),i].filter(Boolean).join(":");if(n.has(s))return n.get(s);let h=mt(t)?.contentWindow;if(!h)return new Map;let l=h?.document,g,d;r?(g=l.createElementNS(U,"svg"),d=g.ownerDocument.createElementNS(g.namespaceURI,o),a.forEach(([f,p])=>{d.setAttributeNS(null,f,p)}),g.appendChild(d)):g=d=l.createElement(o),d.textContent=" ",l.body.appendChild(g);let m=h.getComputedStyle(d,i),u=new Map;for(let f=m.length,p=0;p<f;p++){let b=m.item(p);ft.includes(b)||u.set(b,m.getPropertyValue(b))}return l.body.removeChild(g),n.set(s,u),u}function we(e,i,t){let n=new Map,o=[],r=new Map;if(t)for(let s of t)a(s);else for(let s=e.length,c=0;c<s;c++){let h=e.item(c);a(h)}for(let s=o.length,c=0;c<s;c++)r.get(o[c])?.forEach((h,l)=>n.set(l,h));function a(s){let c=e.getPropertyValue(s),h=e.getPropertyPriority(s),l=s.lastIndexOf("-"),g=l>-1?s.substring(0,l):void 0;if(g){let d=r.get(g);d||(d=new Map,r.set(g,d)),d.set(s,[c,h])}i.get(s)===c&&!h||(g?o.push(g):n.set(s,[c,h]))}return n}function bt(e,i,t,n){let{ownerWindow:o,includeStyleProperties:r,currentParentNodeStyle:a}=n,s=i.style,c=o.getComputedStyle(e),h=Ee(e,null,n);a?.forEach((g,d)=>{h.delete(d)});let l=we(c,h,r);l.delete("transition-property"),l.delete("all"),l.delete("d"),l.delete("content"),t&&(l.delete("margin-top"),l.delete("margin-right"),l.delete("margin-bottom"),l.delete("margin-left"),l.delete("margin-block-start"),l.delete("margin-block-end"),l.delete("margin-inline-start"),l.delete("margin-inline-end"),l.set("box-sizing",["border-box",""])),l.get("background-clip")?.[0]==="text"&&i.classList.add("______background-clip--text"),he&&(l.has("font-kerning")||l.set("font-kerning",["normal",""]),(l.get("overflow-x")?.[0]==="hidden"||l.get("overflow-y")?.[0]==="hidden")&&l.get("text-overflow")?.[0]==="ellipsis"&&e.scrollWidth===e.clientWidth&&l.set("text-overflow",["clip",""]));for(let g=s.length,d=0;d<g;d++)s.removeProperty(s.item(d));return l.forEach(([g,d],m)=>{s.setProperty(m,g,d)}),l}function Et(e,i){(We(e)||Ge(e)||ze(e))&&i.setAttribute("value",e.value)}var wt=[":before",":after"],yt=[":-webkit-scrollbar",":-webkit-scrollbar-button",":-webkit-scrollbar-thumb",":-webkit-scrollbar-track",":-webkit-scrollbar-track-piece",":-webkit-scrollbar-corner",":-webkit-resizer"];function vt(e,i,t,n,o){let{ownerWindow:r,svgStyleElement:a,svgStyles:s,currentNodeStyle:c}=n;if(!a||!r)return;function h(l){let g=r.getComputedStyle(e,l),d=g.getPropertyValue("content");if(!d||d==="none")return;o?.(d),d=d.replace(/(')|(")|(counter\(.+\))/g,"");let m=[me()],u=Ee(e,l,n);c?.forEach((E,y)=>{u.delete(y)});let f=we(g,u,n.includeStyleProperties);f.delete("content"),f.delete("-webkit-locale"),f.get("background-clip")?.[0]==="text"&&i.classList.add("______background-clip--text");let p=[`content: '${d}';`];if(f.forEach(([E,y],T)=>{p.push(`${T}: ${E}${y?" !important":""};`)}),p.length===1)return;try{i.className=[i.className,...m].join(" ")}catch(E){n.log.warn("Failed to copyPseudoClass",E);return}let b=p.join(`
  `),w=s.get(b);w||(w=[],s.set(b,w)),w.push(`.${m[0]}:${l}`)}wt.forEach(h),t&&yt.forEach(h)}var ee=new Set(["symbol"]);async function te(e,i,t,n,o){if(v(t)&&(je(t)||Ve(t))||n.filter&&!n.filter(t))return;ee.has(i.nodeName)||ee.has(t.nodeName)?n.currentParentNodeStyle=void 0:n.currentParentNodeStyle=n.currentNodeStyle;let r=await q(t,n,!1,o);n.isEnable("restoreScrollPosition")&&St(e,r),i.appendChild(r)}async function ie(e,i,t,n){let o=(v(e)?e.shadowRoot?.firstChild:void 0)??e.firstChild;for(let r=o;r;r=r.nextSibling)if(!$e(r))if(v(r)&&qe(r)&&typeof r.assignedNodes=="function"){let a=r.assignedNodes();for(let s=0;s<a.length;s++)await te(e,i,a[s],t,n)}else await te(e,i,r,t,n)}function St(e,i){if(!N(e)||!N(i))return;let{scrollTop:t,scrollLeft:n}=e;if(!t&&!n)return;let{transform:o}=i.style,r=new DOMMatrix(o),{a,b:s,c,d:h}=r;r.a=1,r.b=0,r.c=0,r.d=1,r.translateSelf(-n,-t),r.a=a,r.b=s,r.c=c,r.d=h,i.style.transform=r.toString()}function Tt(e,i){let{backgroundColor:t,width:n,height:o,style:r}=i,a=e.style;if(t&&a.setProperty("background-color",t,"important"),n&&a.setProperty("width",`${n}px`,"important"),o&&a.setProperty("height",`${o}px`,"important"),r)for(let s in r)a[s]=r[s]}var At=/^[\w-:]+$/;async function q(e,i,t=!1,n){let{ownerDocument:o,ownerWindow:r,fontFamilies:a}=i;if(o&&Ue(e))return n&&/\S/.test(e.data)&&n(e.data),o.createTextNode(e.data);if(o&&r&&v(e)&&(N(e)||I(e))){let c=await ut(e,i);if(i.isEnable("removeAbnormalAttributes")){let u=c.getAttributeNames();for(let f=u.length,p=0;p<f;p++){let b=u[p];At.test(b)||c.removeAttribute(b)}}let h=i.currentNodeStyle=bt(e,c,t,i);t&&Tt(c,i);let l=!1;if(i.isEnable("copyScrollbar")){let u=[h.get("overflow-x")?.[0],h.get("overflow-y")?.[0]];l=u.includes("scroll")||(u.includes("auto")||u.includes("overlay"))&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}let g=h.get("text-transform")?.[0],d=fe(h.get("font-family")?.[0]),m=d?u=>{g==="uppercase"?u=u.toUpperCase():g==="lowercase"?u=u.toLowerCase():g==="capitalize"&&(u=u[0].toUpperCase()+u.substring(1)),d.forEach(f=>{let p=a.get(f);p||a.set(f,p=new Set),u.split("").forEach(b=>p.add(b))})}:void 0;return vt(e,c,l,i,m),Et(e,c),k(e)||await ie(e,c,i,m),c}let s=e.cloneNode(!1);return await ie(e,s,i),s}function Ct(e){if(e.ownerDocument=void 0,e.ownerWindow=void 0,e.svgStyleElement=void 0,e.svgDefsElement=void 0,e.svgStyles.clear(),e.defaultComputedStyles.clear(),e.sandbox){try{e.sandbox.remove()}catch(i){e.log.warn("Failed to destroyContext",i)}e.sandbox=void 0}e.workers=[],e.fontFamilies.clear(),e.fontCssTexts.clear(),e.requests.clear(),e.tasks=[]}function Ht(e){let{url:i,timeout:t,responseType:n,...o}=e,r=new AbortController,a=t?setTimeout(()=>r.abort(),t):void 0;return fetch(i,{signal:r.signal,...o}).then(s=>{if(!s.ok)throw new Error("Failed fetch, not 2xx response",{cause:s});switch(n){case"arrayBuffer":return s.arrayBuffer();case"dataUrl":return s.blob().then(tt);case"text":default:return s.text()}}).finally(()=>clearTimeout(a))}function D(e,i){let{url:t,requestType:n="text",responseType:o="text",imageDom:r}=i,a=t,{timeout:s,acceptOfImage:c,requests:h,fetchFn:l,fetch:{requestInit:g,bypassingCache:d,placeholderImage:m},font:u,workers:f,fontFamilies:p}=e;n==="image"&&(F||V)&&e.drawImageCount++;let b=h.get(t);if(!b){d&&d instanceof RegExp&&d.test(a)&&(a+=(/\?/.test(a)?"&":"?")+new Date().getTime());let w=n.startsWith("font")&&u&&u.minify,E=new Set;w&&n.split(";")[1].split(",").forEach(O=>{p.has(O)&&p.get(O).forEach(K=>E.add(K))});let y=w&&E.size,T={url:a,timeout:s,responseType:y?"arrayBuffer":o,headers:n==="image"?{accept:c}:void 0,...g};b={type:n,resolve:void 0,reject:void 0,response:null},b.response=(async()=>{if(l&&n==="image"){let S=await l(t);if(S)return S}return!F&&t.startsWith("http")&&f.length?new Promise((S,O)=>{f[h.size&f.length-1].postMessage({rawUrl:t,...T}),b.resolve=S,b.reject=O}):Ht(T)})().catch(S=>{if(h.delete(t),n==="image"&&m)return e.log.warn("Failed to fetch image base64, trying to use placeholder image",a),typeof m=="string"?m:m(r);throw S}),h.set(t,b)}return b.response}async function ye(e,i,t,n){if(!ve(e))return e;for(let[o,r]of xt(e,i))try{let a=await D(t,{url:r,requestType:n?"image":"text",responseType:"dataUrl"});e=e.replace(Lt(o),`$1${a}$3`)}catch(a){t.log.warn("Failed to fetch css data url",o,a)}return e}function ve(e){return/url\((['"]?)([^'"]+?)\1\)/.test(e)}var Se=/url\((['"]?)([^'"]+?)\1\)/g;function xt(e,i){let t=[];return e.replace(Se,(n,o,r)=>(t.push([r,de(r,i)]),n)),t.filter(([n])=>!G(n))}function Lt(e){let i=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${i})(['"]?\\))`,"g")}var Nt=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function Mt(e,i){return Nt.map(t=>{let n=e.getPropertyValue(t);return!n||n==="none"?null:((F||V)&&i.drawImageCount++,ye(n,null,i,!0).then(o=>{!o||n===o||e.setProperty(t,o,e.getPropertyPriority(t))}))}).filter(Boolean)}function Dt(e,i){if(x(e)){let t=e.currentSrc||e.src;if(!G(t))return[D(i,{url:t,imageDom:e,requestType:"image",responseType:"dataUrl"}).then(n=>{n&&(e.srcset="",e.dataset.originalSrc=t,e.src=n||"")})];(F||V)&&i.drawImageCount++}else if(I(e)&&!G(e.href.baseVal)){let t=e.href.baseVal;return[D(i,{url:t,imageDom:e,requestType:"image",responseType:"dataUrl"}).then(n=>{n&&(e.dataset.originalSrc=t,e.href.baseVal=n||"")})]}return[]}function It(e,i){let{ownerDocument:t,svgDefsElement:n}=i,o=e.getAttribute("href")??e.getAttribute("xlink:href");if(!o)return[];let[r,a]=o.split("#");if(a){let s=`#${a}`,c=t?.querySelector(`svg ${s}`);if(r&&e.setAttribute("href",s),n?.querySelector(s))return[];if(c)return n?.appendChild(c.cloneNode(!0)),[];if(r)return[D(i,{url:r,responseType:"text"}).then(h=>{n?.insertAdjacentHTML("beforeend",h)})]}return[]}function Te(e,i){let{tasks:t}=i;v(e)&&((x(e)||ge(e))&&t.push(...Dt(e,i)),ke(e)&&t.push(...It(e,i))),N(e)&&t.push(...Mt(e.style,i)),e.childNodes.forEach(n=>{Te(n,i)})}async function Rt(e,i){let{ownerDocument:t,svgStyleElement:n,fontFamilies:o,fontCssTexts:r,tasks:a,font:s}=i;if(!(!t||!n||!o.size))if(s&&s.cssText){let c=re(s.cssText,i);n.appendChild(t.createTextNode(`${c}
`))}else{let c=Array.from(t.styleSheets).filter(l=>{try{return"cssRules"in l&&!!l.cssRules.length}catch(g){return i.log.warn(`Error while reading CSS rules from ${l.href}`,g),!1}});await Promise.all(c.flatMap(l=>Array.from(l.cssRules).map(async(g,d)=>{if(Fe(g)){let m=d+1,u=g.href,f="";try{f=await D(i,{url:u,requestType:"text",responseType:"text"})}catch(b){i.log.warn(`Error fetch remote css import from ${u}`,b)}let p=f.replace(Se,(b,w,E)=>b.replace(E,de(E,u)));for(let b of Ot(p))try{l.insertRule(b,b.startsWith("@import")?m+=1:l.cssRules.length)}catch(w){i.log.warn("Error inserting rule from remote css import",{rule:b,error:w})}}}))),c.flatMap(l=>Array.from(l.cssRules)).filter(l=>Pe(l)&&ve(l.style.getPropertyValue("src"))&&fe(l.style.getPropertyValue("font-family"))?.some(g=>o.has(g))).forEach(l=>{let g=l,d=r.get(g.cssText);d?n.appendChild(t.createTextNode(`${d}
`)):a.push(ye(g.cssText,g.parentStyleSheet?g.parentStyleSheet.href:null,i).then(m=>{m=re(m,i),r.set(g.cssText,m),n.appendChild(t.createTextNode(`${m}
`))}))})}}var _t=/(\/\*[\s\S]*?\*\/)/g,ne=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;function Ot(e){if(e==null)return[];let i=[],t=e.replace(_t,"");for(;;){let r=ne.exec(t);if(!r)break;i.push(r[0])}t=t.replace(ne,"");let n=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let r=n.exec(t);if(r)o.lastIndex=n.lastIndex;else if(r=o.exec(t),r)n.lastIndex=o.lastIndex;else break;i.push(r[0])}return i}var Pt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ft=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function re(e,i){let{font:t}=i,n=t?t?.preferredFormat:void 0;return n?e.replace(Ft,o=>{for(;;){let[r,,a]=Pt.exec(o)||[];if(!a)return"";if(a===n)return`src: ${r};`}}):e}async function kt(e,i){let t=await z(e,i);if(v(t.node)&&I(t.node))return t.node;let{ownerDocument:n,log:o,tasks:r,svgStyleElement:a,svgDefsElement:s,svgStyles:c,font:h,progress:l,autoDestruct:g,onCloneNode:d,onEmbedNode:m,onCreateForeignObjectSvg:u}=t;o.time("clone node");let f=await q(t.node,t,!0);if(a&&n){let y="";c.forEach((T,S)=>{y+=`${T.join(`,
`)} {
  ${S}
}
`}),a.appendChild(n.createTextNode(y))}o.timeEnd("clone node"),await d?.(f),h!==!1&&v(f)&&(o.time("embed web font"),await Rt(f,t),o.timeEnd("embed web font")),o.time("embed node"),Te(f,t);let p=r.length,b=0,w=async()=>{for(;;){let y=r.pop();if(!y)break;try{await y}catch(T){t.log.warn("Failed to run task",T)}l?.(++b,p)}};l?.(b,p),await Promise.all([...Array.from({length:4})].map(w)),o.timeEnd("embed node"),await m?.(f);let E=$t(f,t);return s&&E.insertBefore(s,E.children[0]),a&&E.insertBefore(a,E.children[0]),g&&Ct(t),await u?.(E),E}function $t(e,i){let{width:t,height:n}=i,o=Ke(t,n,e.ownerDocument),r=o.ownerDocument.createElementNS(o.namespaceURI,"foreignObject");return r.setAttributeNS(null,"x","0%"),r.setAttributeNS(null,"y","0%"),r.setAttributeNS(null,"width","100%"),r.setAttributeNS(null,"height","100%"),r.append(e),o.appendChild(r),o}async function Ut(e,i){let t=await z(e,i),n=await kt(t),o=Qe(n,t.isEnable("removeControlCharacter"));t.autoDestruct||(t.svgStyleElement=pe(t.ownerDocument),t.svgDefsElement=t.ownerDocument?.createElementNS(U,"defs"),t.svgStyles.clear());let r=H(o,n.ownerDocument);return await lt(r,t)}async function Ae(e,i){let t=await z(e,i),{log:n,type:o,quality:r,dpi:a}=t,s=await Ut(t);n.time("canvas to blob");let c=await Ze(s,o,r);if(["image/png","image/jpeg"].includes(o)&&a){let h=await it(c.slice(0,33)),l=new Uint8Array(h);return o==="image/png"?l=Ie(l,a):o==="image/jpeg"&&(l=Le(l,a)),n.timeEnd("canvas to blob"),new Blob([l,c.slice(33)],{type:o})}return n.timeEnd("canvas to blob"),c}var R={METADATA:"data-replit-metadata",COMPONENT_NAME:"data-component-name"};function Ce(e){if(e.startsWith("http://localhost:"))return!0;try{return new URL(e).hostname.endsWith(A.ALLOWED_DOMAIN)}catch{return!1}}function Y(e){if(!e)return null;let i=document.elementFromPoint(e.clientX,e.clientY);return i instanceof HTMLElement?i:null}function Jt(e,i=300){if(!e)return"";let t=String(e);return t.length<=i?t:t.slice(0,i)+"..."}function X(e){if(e)return{tagName:e.tagName.toLowerCase(),className:e.className.toString?e.className.toString():String(e.className),textContent:e.textContent??"",id:e.id}}function L(e){return e.getAttribute(R.COMPONENT_NAME)??e.tagName.toLowerCase()}function J(e){let i=window.getComputedStyle(e),t=e.parentElement,n=e.nextElementSibling,o=t?.parentElement??null,r={backgroundColor:i.backgroundColor,color:i.color,display:i.display,position:i.position,width:i.width,height:i.height,fontSize:i.fontSize,fontFamily:i.fontFamily,fontWeight:i.fontWeight,margin:i.margin,padding:i.padding,textAlign:i.textAlign};return{elementPath:e.getAttribute(R.METADATA)??"",elementName:L(e),textContent:e.textContent??"",originalTextContent:e.getAttribute("data-original-text")?decodeURIComponent(e.getAttribute("data-original-text")??""):void 0,id:e.id,className:e.className.toString?e.className.toString():String(e.className),computedStyles:r,textAlign:i.textAlign,relatedElements:{parent:X(t),nextSibling:X(n),grandParent:X(o)}}}async function He(e){try{let t=window.getComputedStyle(e).backgroundColor;return Bt(t)&&(t=window.getComputedStyle(document.documentElement).backgroundColor),await Ae(e,{type:"image/png",backgroundColor:t,fetch:{requestInit:{mode:"no-cors"}}})}catch(i){console.error("[replit-cartographer] Failed to take screenshot:",i);return}}function Bt(e){return e==="transparent"||e==="rgba(0, 0, 0, 0)"||e.endsWith(", 0)")||e.endsWith(",0)")}function B(e){let i=e.getAttribute(R.METADATA);if(!i)return[e];let t=`[${R.METADATA}="${i}"]`,n=Array.from(document.querySelectorAll(t));return n.length>0?n:[e]}var _=class{selectedElement=null;siblingElements=[];isActive=!1;lastHighlightedElement=null;enableEditing=!1;shadowHost=null;shadowRoot=null;hoverHighlighter=null;hoverLabel=null;selectedHighlighter=null;selectedLabel=null;siblingHighlighters=[];mutationObserver=null;constructor(){this.setupMessageListener(),this.notifyScriptLoaded()}initializeHighlighter(){this.shadowHost=document.createElement("div"),this.shadowHost.style.all="initial",this.shadowRoot=this.shadowHost.attachShadow({mode:"open"}),document.body.appendChild(this.shadowHost);let i=document.createElement("style");i.textContent=Q,this.shadowRoot.appendChild(i),this.hoverHighlighter=document.createElement("div"),this.hoverLabel=document.createElement("div"),this.hoverHighlighter.className="beacon-highlighter beacon-hover-highlighter",this.hoverLabel.className="beacon-label beacon-hover-label",this.selectedHighlighter=document.createElement("div"),this.selectedLabel=document.createElement("div"),this.selectedHighlighter.className="beacon-highlighter beacon-selected-highlighter",this.selectedLabel.className="beacon-label beacon-selected-label",this.siblingHighlighters=[],this.shadowRoot.appendChild(this.selectedHighlighter),this.shadowRoot.appendChild(this.selectedLabel),this.shadowRoot.appendChild(this.hoverHighlighter),this.shadowRoot.appendChild(this.hoverLabel)}setupMessageListener(){window.addEventListener("message",this.handleMessage.bind(this))}notifyScriptLoaded(){this.postMessageToParent({type:"SELECTOR_SCRIPT_LOADED",timestamp:Date.now(),version:P})}postMessageToParent(i){window.parent&&window.parent.postMessage(i,"*")}handleMouseMove=i=>{if(this.isActive&&this.hoverHighlighter){this.hoverHighlighter.style.pointerEvents="none";let t=Y(i);if(!t||t===this.hoverHighlighter||t===this.selectedHighlighter||t===this.shadowHost){this.hideHighlight(this.hoverHighlighter,this.hoverLabel),this.lastHighlightedElement=null;return}if(t===this.selectedElement){this.hideHighlight(this.hoverHighlighter,this.hoverLabel),this.lastHighlightedElement=null;return}if(this.siblingElements.includes(t)){this.lastHighlightedElement=t;let o=t.getBoundingClientRect(),r=window.innerHeight,a=Math.max(0,o.top),s=Math.min(r,o.bottom),c=Math.max(0,s-a);if(this.hoverHighlighter&&this.hoverLabel){Object.assign(this.hoverHighlighter.style,{opacity:c>0?"1":"0",top:`${a}px`,left:`${o.left}px`,width:`${o.width}px`,height:`${c}px`,pointerEvents:"none"}),this.hoverLabel.textContent=L(t);let h=this.calculateLabelPosition(o,a);Object.assign(this.hoverLabel.style,{...h,opacity:c>0?"1":"0"})}return}this.lastHighlightedElement&&this.lastHighlightedElement!==t&&this.lastHighlightedElement!==this.selectedElement&&this.lastHighlightedElement.removeAttribute("contenteditable"),this.lastHighlightedElement=t;let n=B(t);if(n.length>1){if(this.hoverHighlighter&&this.hoverLabel){this.hoverHighlighter.style.opacity="1",this.hoverLabel.style.opacity="1";let o=t.getBoundingClientRect(),r=window.innerHeight,a=Math.max(0,o.top),s=Math.min(r,o.bottom),c=Math.max(0,s-a);Object.assign(this.hoverHighlighter.style,{opacity:c>0?"1":"0",top:`${a}px`,left:`${o.left}px`,width:`${o.width}px`,height:`${c}px`}),this.hoverLabel.textContent=L(t);let h=this.calculateLabelPosition(o,a);Object.assign(this.hoverLabel.style,{...h,opacity:c>0?"1":"0"})}this.highlightSiblingElements(t,n)}else this.updateHighlighterPosition(t,this.hoverHighlighter,this.hoverLabel)}};handleMouseLeave=()=>{this.isActive&&(this.hoverHighlighter&&(this.hoverHighlighter.style.opacity="0"),this.hoverLabel&&(this.hoverLabel.style.opacity="0"),this.selectedElement||this.clearSiblingHighlighters(),this.lastHighlightedElement&&this.lastHighlightedElement!==this.selectedElement&&this.lastHighlightedElement.removeAttribute("contenteditable"))};calculateLabelPosition(i,t){return t<28?{top:`${t+window.scrollY}px`,left:`${i.left+window.scrollX}px`,transform:"none",marginTop:"2px"}:{top:`${t+window.scrollY}px`,left:`${i.left+window.scrollX}px`,transform:"translateY(-100%)",marginTop:"-4px"}}updateHighlighterPosition(i,t,n){if(!t||!n)return;let o=B(i);this.enableEditing&&o.length<=1&&i.setAttribute("contenteditable","plaintext-only");let r=i.getBoundingClientRect(),a=window.innerHeight,s=Math.max(0,r.top),c=Math.min(a,r.bottom),h=Math.max(0,c-s);Object.assign(t.style,{opacity:h>0?"1":"0",top:`${s}px`,left:`${r.left}px`,width:`${r.width}px`,height:`${h}px`}),n.textContent=L(i);let l=this.calculateLabelPosition(r,s);Object.assign(n.style,{...l,opacity:h>0?"1":"0"}),t===this.selectedHighlighter?o.length>1?this.highlightSiblingElements(i,o):this.clearSiblingHighlighters():t===this.hoverHighlighter&&!this.selectedElement&&(o.length>1?this.highlightSiblingElements(i,o):this.clearSiblingHighlighters())}clearSiblingHighlighters(){this.siblingHighlighters.forEach(i=>{i.remove()}),this.siblingHighlighters=[],this.siblingElements=[]}highlightSiblingElements(i,t){if(!this.shadowRoot)return;this.clearSiblingHighlighters();let n=t.filter(o=>o!==i);this.siblingElements=n,this.createSiblingHighlighters()}createSiblingHighlighters(){!this.shadowRoot||this.siblingElements.length===0||this.siblingElements.forEach(i=>{let t=document.createElement("div");t.className="beacon-highlighter beacon-sibling-highlighter",this.shadowRoot?.appendChild(t),this.siblingHighlighters.push(t);let n=i.getBoundingClientRect(),o=window.innerHeight,r=Math.max(0,n.top),a=Math.min(o,n.bottom),s=Math.max(0,a-r);Object.assign(t.style,{opacity:s>0?"1":"0",top:`${r}px`,left:`${n.left}px`,width:`${n.width}px`,height:`${s}px`})})}hideHighlight(i,t){i&&(i.style.opacity="0"),t&&(t.style.opacity="0");let n=this.selectedElement&&this.siblingElements.length>0,o=i===this.hoverHighlighter&&!this.selectedElement;(i===this.selectedHighlighter||o)&&!n&&this.clearSiblingHighlighters()}handleClick=async i=>{if(!this.isActive)return;i.preventDefault(),i.stopPropagation();let t=Y(i);if((!t||t===this.hoverHighlighter||t===this.selectedHighlighter||t===this.shadowHost||this.siblingHighlighters.includes(t))&&(t=this.lastHighlightedElement),!t)return;if(this.unselectCurrentElement(),t===this.selectedElement){this.hideHighlight(this.selectedHighlighter,this.selectedLabel),this.postMessageToParent({type:"ELEMENT_UNSELECTED",timestamp:Date.now()});return}this.siblingElements.includes(t)?(this.siblingHighlighters.forEach(c=>c.remove()),this.siblingHighlighters=[]):this.clearSiblingHighlighters(),this.selectedElement=t;let o=B(t),r=o.length>1;r&&(this.siblingElements=o.filter(c=>c!==t),this.createSiblingHighlighters()),t.hasAttribute("data-original-text")||t.setAttribute("data-original-text",encodeURIComponent(t.textContent??"")),!t.hasAttribute("data-original-style")&&t.hasAttribute("style")&&t.setAttribute("data-original-style",encodeURIComponent(t.getAttribute("style")??"")),!r&&this.enableEditing&&this.selectedElement.focus(),this.selectedHighlighter&&this.selectedLabel&&(this.selectedHighlighter.style.outlineStyle="solid",this.selectedHighlighter.style.opacity="1",this.selectedHighlighter.style.pointerEvents="none",this.selectedLabel.style.opacity="1",this.selectedLabel.textContent=L(t)),this.hoverHighlighter&&(this.hoverHighlighter.style.opacity="0",this.hoverHighlighter.style.pointerEvents="none"),this.hoverLabel&&(this.hoverLabel.style.opacity="0"),this.updateHighlighterPosition(t,this.selectedHighlighter,this.selectedLabel);let a=J(t),s;try{s=await He(t)}catch(c){console.error("[replit-cartographer] Error capturing element screenshot:",c)}this.observeSelectedElement(),this.postMessageToParent({type:"ELEMENT_SELECTED",payload:{...a,screenshotBlob:s??void 0,siblingCount:r?o.length:0},timestamp:Date.now()})};restoreElements(){document.querySelectorAll('[data-replit-dirty="true"]').forEach(t=>{if(t.hasAttribute("data-original-text")&&t.textContent!==decodeURIComponent(t.getAttribute("data-original-text")||"")){let n=decodeURIComponent(t.getAttribute("data-original-text")||"");t.textContent=n,t.removeAttribute("data-original-text")}if(t.hasAttribute("data-original-style")){let n=decodeURIComponent(t.getAttribute("data-original-style")||"");t.setAttribute("style",n),t.removeAttribute("data-original-style")}else t.removeAttribute("style");t.removeAttribute("data-replit-dirty")})}unselectCurrentElement(){if(this.restoreElements(),this.selectedElement){if(this.selectedElement.removeAttribute("contenteditable"),this.selectedElement.hasAttribute("data-original-style")){let i=decodeURIComponent(this.selectedElement.getAttribute("data-original-style")||"");this.selectedElement.setAttribute("style",i),this.selectedElement.removeAttribute("data-original-style")}this.selectedElement=null}this.clearSiblingHighlighters(),this.mutationObserver&&this.mutationObserver.disconnect()}handleMessage=i=>{if(!Ce(i.origin))return;let t=i.data;if(!(!t||typeof t!="object"))switch(t.type){case"TOGGLE_REPLIT_VISUAL_EDITOR":{this.handleVisualEditorToggle(t);break}case"CLEAR_SELECTION":{this.restoreElements(),this.unselectCurrentElement(),this.hideHighlight(this.selectedHighlighter,this.selectedLabel);break}case"UPDATE_SELECTED_ELEMENT":{if(!this.selectedElement)return;let{attributes:n}=t;[this.selectedElement,...this.siblingElements].forEach(r=>{n.style!==void 0&&(r.setAttribute("style",n.style),r.setAttribute("data-replit-dirty","true")),n.textContent!==void 0&&(r.textContent=n.textContent,r.setAttribute("data-replit-dirty","true")),n.className!==void 0&&(r.className=n.className,r.setAttribute("data-replit-dirty","true"))}),this.updateHighlighterPosition(this.selectedElement,this.selectedHighlighter,this.selectedLabel)}}};handleVisualEditorToggle(i){if(i.type!=="TOGGLE_REPLIT_VISUAL_EDITOR")return;let t=!!i.enabled;this.enableEditing=!!i.enableEditing,t?this.postMessageToParent({type:"REPLIT_VISUAL_EDITOR_ENABLED",timestamp:Date.now()}):this.postMessageToParent({type:"REPLIT_VISUAL_EDITOR_DISABLED",timestamp:Date.now()}),this.isActive!==t&&(this.isActive=t,this.toggleEventListeners(t))}observeSelectedElement(){this.selectedElement&&(this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver(i=>{if(i.some(n=>n.type==="characterData")&&this.selectedElement){this.selectedElement.setAttribute("data-replit-dirty","true");let n=J(this.selectedElement);this.postMessageToParent({type:"ELEMENT_TEXT_CHANGED",payload:n,timestamp:Date.now()}),this.updateHighlighterPosition(this.selectedElement,this.selectedHighlighter,this.selectedLabel)}}),this.mutationObserver.observe(this.selectedElement,{characterData:!0,childList:!1,attributes:!1,subtree:!0}))}recalculateSelectedElement=()=>{this.isActive&&(this.selectedElement&&this.updateHighlighterPosition(this.selectedElement,this.selectedHighlighter,this.selectedLabel),this.lastHighlightedElement&&this.updateHighlighterPosition(this.lastHighlightedElement,this.hoverHighlighter,this.hoverLabel))};toggleEventListeners(i){i?(this.initializeHighlighter(),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseleave",this.handleMouseLeave),document.addEventListener("click",this.handleClick,!0),window.addEventListener("resize",this.recalculateSelectedElement),window.addEventListener("scroll",this.recalculateSelectedElement,!0)):(document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("click",this.handleClick,!0),document.removeEventListener("mouseleave",this.handleMouseLeave),window.removeEventListener("resize",this.recalculateSelectedElement),window.removeEventListener("scroll",this.recalculateSelectedElement,!0),this.restoreElements(),this.selectedElement&&(this.selectedElement.removeAttribute("contenteditable"),this.selectedElement.removeAttribute("data-original-text")),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.clearSiblingHighlighters(),this.hoverHighlighter?.remove(),this.hoverLabel?.remove(),this.selectedHighlighter?.remove(),this.selectedLabel?.remove(),this.shadowHost?.remove(),this.hoverHighlighter=null,this.hoverLabel=null,this.selectedHighlighter=null,this.selectedLabel=null,this.shadowHost=null,this.shadowRoot=null,this.selectedElement=null)}};if(typeof window<"u")try{window.REPLIT_BEACON_VERSION||(window.REPLIT_BEACON_VERSION=P,new _)}catch(e){console.error("[replit-beacon] Failed to initialize:",e)}})();
